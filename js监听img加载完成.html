<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{margin: 0;padding: 0;}
		div{width:200px;height: 30px;border:1px solid #ccc;margin: 50px auto;}
		span{display:inline-block;height: 30px;background: #abcdef;}
	</style>
</head>
<body>

	<div>
		<span id="loading"></span>
	</div>


	<!-- 图片需要自己添加到本地  协议要走http or https -->
	<script>
		var img_arr = ['1.jpg','2.png','2.jpg','3.png'];
		var nums = img_arr.length;
		var start = 0;
		for(var i in img_arr){
			var img = document.createElement('img');
			img.src = img_arr[i];
			(function(j){
				img.onload = function(){
					start++;
					if(start == nums){
						console.log('全部加载完成');
					}
					document.getElementById('loading').style.width = (start/nums)*100 + '%';
				};
				img.onerror = function(){
					start++;
					console.log(img_arr[j] + '失败');
					document.getElementById('loading').style.width = (start/nums)*100 + '%';
				}
			})(i);
			
		}

	</script>
</body>
</html>
